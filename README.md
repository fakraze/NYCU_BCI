# Car Competition (BCI Lab 3)

## Project Summary

This project implements a Brain-Computer Interface (BCI) system to control a remote-controlled car using Electrooculography (EOG) signals generated by different types of blinks.
The project is based on Lab 2 materials from the [CECNL/BCI_lab1-Mind-controlled-car](https://github.com/CECNL/BCI_lab1-Mind-controlled-car) repository.

**Control Mapping:**

* **Left Blink** $\rightarrow$ Turn Left
* **Right Blink** $\rightarrow$ Turn Right
* **Double Blink** $\rightarrow$ Drive Straight

## Files and Functionality

| File Name           | Description                                                                                         |
| :------------------ | :-------------------------------------------------------------------------------------------------- |
| `real_time_diff.py` | **Real-time Plotting only.** Displays the signal difference ($FP1 - FP2$) and sum ($FP1 + FP2$).    |
| `determine.py`      | **Plotting + Blink Determination.** Plots signals and identifies blink types.                       |
| `hybrid_control.py` | **Plotting + Determination + Car Control.** The full system, translating blinks into car movements. |

## Preprocessing
* **Filter:** 2nd-order Butterworth bandpass filter
* **Frequency Range:** 0.5 Hz - 10 Hz

## Control Logic (Blink Classification)

Classification uses the **extreme values** of the last 100 data points for $\text{diff} (FP1-FP2)$ and $\text{sum} (FP1+FP2)$.

### Classification Table
| Blink Type       | Extreme Difference (FP1 - FP2) | Extreme Sum (FP1 + FP2) | Car Action                |
| :--------------- | :----------------------------- | :---------------------- | :------------------------ |
| **Left Blink**   | $< -500$                       | $< -500$                | **Turn Left (0.2s)**      |
| **Right Blink**  | $> 500$                        | $< -500$                | **Turn Right (0.2s)**     |
| **Double Blink** | $abs < 200$                    | $> 250$                 | **Drive Straight (0.2s)** |

**Cooldown:** A 1-second cooldown period is enforced after every movement command.

## Getting Started

1.  Clone the repository.
2.  Install dependencies (from lab2 https://github.com/CECNL/BCI_lab1-Mind-controlled-car, enviroments isn't guarantee to work)
3.  Run Cygnus and check resistance is low enough in fp1 and fp2 (details in ./Midterm Mind-controlled car.pdf)
4.  Run Openvibe acquisition server (details in ./Midterm Mind-controlled car.pdf)
5.  Connect car and verify the serial port (ex: COM8)
6.  Run the main control script:
    ```bash
    python hybrid_control.py
    ```
